<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Pranath Fernando">
<meta name="dcterms.date" content="2022-03-06">
<meta name="description" content="Epidemiological studies can provide valuable insights about a disease, however a study can yield biased results for many different reasons. In this article we explore some of these factors, and provides guidance on how to deal with bias in epidemiological research.">

<title>LivingDataLab - Validity and Bias in Epidemiology</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-91568149-1', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script>


<link rel="stylesheet" href="../css/styles.css">
<meta property="og:title" content="LivingDataLab - Validity and Bias in Epidemiology">
<meta property="og:description" content="Epidemiological studies can provide valuable insights about a disease, however a study can yield biased results for many different reasons.">
<meta property="og:image" content="https://github.com/pranath/blog/raw/master/images/epidemiology3.jpg">
<meta property="og:site-name" content="LivingDataLab">
<meta name="twitter:title" content="LivingDataLab - Validity and Bias in Epidemiology">
<meta name="twitter:description" content="Epidemiological studies can provide valuable insights about a disease, however a study can yield biased results for many different reasons.">
<meta name="twitter:image" content="https://github.com/pranath/blog/raw/master/images/epidemiology3.jpg">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">LivingDataLab</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../projects.html" aria-current="page">
 <span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/pranath-fernando/"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/LivingDataLab"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/pranath"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../index.xml"><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Validity and Bias in Epidemiology</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title d-none d-lg-block">Validity and Bias in Epidemiology</h1>
                  <div>
        <div class="description">
          Epidemiological studies can provide valuable insights about a disease, however a study can yield biased results for many different reasons. In this article we explore some of these factors, and provides guidance on how to deal with bias in epidemiological research.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">health</div>
                <div class="quarto-category">epidemiology</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Pranath Fernando </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 6, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../projects.html" class="sidebar-item-text sidebar-link">Projects Overview</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Projects</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../projects/doc-chat.html" class="sidebar-item-text sidebar-link">Document Chat</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../projects/doc-summarisation.html" class="sidebar-item-text sidebar-link">Document Summarisation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../projects/web-page-chat.html" class="sidebar-item-text sidebar-link">Web Page Chat</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../projects/web-page-summarisation.html" class="sidebar-item-text sidebar-link">Web Page Summarisation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../projects/youtube-chat.html" class="sidebar-item-text sidebar-link">YouTube Chat</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../projects/youtube-summarisation.html" class="sidebar-item-text sidebar-link">YouTube Summarisation</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar"><div class="quarto-margin-header"><div class="margin-header-item">
<!-- Begin Mailchimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/classic-071822.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
    /* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
    <form action="https://livingdatalab.us8.list-manage.com/subscribe/post?u=e2d57b0d6e43b4f6bff927a55&amp;id=a30bdff125&amp;f_id=009d05e0f0" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
        <div id="mc_embed_signup_scroll">
        <h2>Subscribe</h2>
<div class="mc-field-group">
    <label for="mce-EMAIL">Email Address
</label>
    <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" required="">
    <span id="mce-EMAIL-HELPERTEXT" class="helper_text"></span>
</div>
    <div id="mce-responses" class="clear foot">
        <div class="response" id="mce-error-response" style="display:none"></div>
        <div class="response" id="mce-success-response" style="display:none"></div>
    </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_e2d57b0d6e43b4f6bff927a55_a30bdff125" tabindex="-1" value=""></div>
        <div class="optionalParent">
            <div class="clear foot">
                <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
            </div>
        </div>
    </div>
</form>
</div>
<script type="text/javascript" src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js"></script><script type="text/javascript">(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';fnames[3]='ADDRESS';ftypes[3]='address';fnames[4]='PHONE';ftypes[4]='phone';fnames[5]='BIRTHDAY';ftypes[5]='birthday';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
<!--End mc_embed_signup-->

</div></div>
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="toc-section-number">1</span>  Introduction</a></li>
  <li><a href="#validity-and-bias" id="toc-validity-and-bias" class="nav-link" data-scroll-target="#validity-and-bias"><span class="toc-section-number">2</span>  Validity and Bias</a>
  <ul class="collapse">
  <li><a href="#selection-bias" id="toc-selection-bias" class="nav-link" data-scroll-target="#selection-bias"><span class="toc-section-number">2.1</span>  Selection bias</a></li>
  <li><a href="#information-bias" id="toc-information-bias" class="nav-link" data-scroll-target="#information-bias"><span class="toc-section-number">2.2</span>  Information bias</a></li>
  </ul></li>
  <li><a href="#association-and-confounding" id="toc-association-and-confounding" class="nav-link" data-scroll-target="#association-and-confounding"><span class="toc-section-number">3</span>  Association and Confounding</a>
  <ul class="collapse">
  <li><a href="#what-is-confounding" id="toc-what-is-confounding" class="nav-link" data-scroll-target="#what-is-confounding"><span class="toc-section-number">3.1</span>  What is Confounding ?</a></li>
  <li><a href="#how-to-detect-confounding" id="toc-how-to-detect-confounding" class="nav-link" data-scroll-target="#how-to-detect-confounding"><span class="toc-section-number">3.2</span>  How to detect Confounding</a></li>
  </ul></li>
  <li><a href="#dealing-with-confounding" id="toc-dealing-with-confounding" class="nav-link" data-scroll-target="#dealing-with-confounding"><span class="toc-section-number">4</span>  Dealing with Confounding</a>
  <ul class="collapse">
  <li><a href="#design-stage" id="toc-design-stage" class="nav-link" data-scroll-target="#design-stage"><span class="toc-section-number">4.1</span>  Design stage</a></li>
  <li><a href="#analysis-stage" id="toc-analysis-stage" class="nav-link" data-scroll-target="#analysis-stage"><span class="toc-section-number">4.2</span>  Analysis stage</a></li>
  <li><a href="#directed-acyclic-graphs-dags" id="toc-directed-acyclic-graphs-dags" class="nav-link" data-scroll-target="#directed-acyclic-graphs-dags"><span class="toc-section-number">4.3</span>  Directed Acyclic Graphs (DAGs)</a></li>
  </ul></li>
  <li><a href="#effect-modification" id="toc-effect-modification" class="nav-link" data-scroll-target="#effect-modification"><span class="toc-section-number">5</span>  Effect modification</a></li>
  <li><a href="#confounding-vs-effect-modifcation" id="toc-confounding-vs-effect-modifcation" class="nav-link" data-scroll-target="#confounding-vs-effect-modifcation"><span class="toc-section-number">6</span>  Confounding vs Effect modifcation</a></li>
  <li><a href="#causation" id="toc-causation" class="nav-link" data-scroll-target="#causation"><span class="toc-section-number">7</span>  Causation</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>Epidemiological studies can provide valuable insights about the frequency of a disease, its potential causes and the effectiveness of available treatments. Selecting an appropriate study design can take you a long way when trying to answer such a question. However, this is by no means enough. A study can yield biased results for many different reasons. This article explores some of these factors and provides guidance on how to deal with bias in epidemiological research. We will learn about the main types of bias and what effect they might have on your study findings. We will then look at the concept of confounding and will explore various methods to identify and control for confounding in different study designs. In the last section we will discuss the phenomenon of effect modification, which is key to understanding and interpreting study results. We will finish with a broader discussion of causality in epidemiology and we will highlight how you can decide whether findings indicate a true association and if this can be considered causal.</p>
</section>
<section id="validity-and-bias" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="validity-and-bias"><span class="header-section-number">2</span> Validity and Bias</h2>
<p>When critiquing epidemiological studies, you will often hear or =read about concepts such as validity and bias which determine whether the results of a study are relevant and should be trusted or not.</p>
<p>When critiquing a particular study, there are some key questions that you would consider. One of these is whether any inferences arising from it are valid for the source population of this study. For example, a study may report an association between a new drug and improved survival among male cancer patients in a university hospital. There are many reasons why this could not reflect the truth such as flaws in the design or the execution of the study. But if we believe that this association truly exists among this group of patients, then we say that this is a study with <em>internal validity</em>.</p>
<p>Another equally important question is whether these inferences are applicable to individuals outside the source population. Internal validity is a prerequisite for this. If we don’t think the results reflect the truth in the source population, discussing if they can be generalized to other groups of people is pointless. But let’s assume that taking this new drug is in fact associated with improved survival among male cancer patients in the university hospital where the study was conducted, and the researchers have done an excellent job showing this. We would say that the study has <em>external validity</em> if we believe that this finding can be applicable to other groups of cancer patients, female patients in the same hospital or patients treated in different settings and countries.</p>
<p>External validity sometimes referred to as generalisability and largely determines the real life impact of a certain finding beyond the specific setting where the research was conducted. Closely linked to validity is the concept of bias. Simply put, an inference is valid when there is no bias. According to one popular definition, bias is any trend in the collection, analysis, interpretation, publication, or review of data that can lead to conclusions that are systematically different from the truth. The key word here is <em>systematically</em>. A systematic error in the design and conduct of the study can result in bias which means that the observed results may be different from the truth.</p>
<p>In conclusion, systematic error can introduce bias in the study which in turn hurts its validity. Bias can take many forms, and scientists have identified many types of bias and their variations over the years. To make things more difficult, there are myriad different classifications and names for bias observed in epidemiological studies. We will consider three broad categories of bias:</p>
<ul>
<li>Selection bias</li>
<li>Information bias</li>
<li>Confounding</li>
</ul>
<section id="selection-bias" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="selection-bias"><span class="header-section-number">2.1</span> Selection bias</h3>
<p>One of the main categories of bias in epidemiological studies is selection bias. In practice when doing research, it is almost impossible to examine the entire study population. This is why we select the sample. Despite our efforts to select a sample that is representative of the study population, it may happen that an individual’s chance of being included in the study sample is related to both the exposure and the outcome. When this happens, we get a biased estimate of the association between the exposure and the outcome and we say that there is <strong>selection bias</strong>.</p>
<p>Let’s consider a case control study where the exposure is diet rich in red meat and the outcome is colon cancer. As we’ve discussed, our sample will include only a fraction of the study population. In one scenario, people with colon cancer have a 60 percent probability to be included in the study sample while people without colon cancer have a 40 percent probability to be included. Clearly, the disease status is associated with inclusion in the sample but within its disease category, individuals are equally likely to be selected regardless of whether they eat a lot of red meat or not. In this case, there is no selection bias.</p>
<p>In another possible scenario, the disease could be irrelevant with regard to being included in the sample. However, individuals eating a lot of red meat could be less likely to be included in the study compared to those not eating red meat. For example, because part of the recruitment strategy was to place posters in shops for vegetarians. In this case, the probability of being included in the sample is associated with the exposure eating red meat but not with the outcome which is colon cancer. Therefore, there is no selection bias in the study.</p>
<p>So, when do we have selection bias? Consider the same case control study. This time, 60 percent of people with colon cancer accept to participate regardless of their diet. Among people without colon cancer, 50 percent of those who eat red meat and 40 percent of those who don’t eat red meat decide to participate. In this scenario, participation in the study sample is associated with both the exposure and the outcome. <em>Therefore, it is a typical case of selection bias and our estimate will be biased</em>.</p>
<p>It is not a coincidence that we have used case-control studies in this example, Case-control studies are particularly susceptible to selection bias but there are ways to minimize selection bias, we will mention three of them. First, researchers try to select controls which are representative of the study population in terms of exposure to the factors under study. Also, in all study designs, it is important to keep non-response to a minimum. When many people decline to participate, it becomes more likely that some bias could be introduced. Finally, it is always good practice to compare those included in the sample with those who declined to respond and explore whether there are any systematic differences. Selection bias can seriously undermine the validity of the study, it is therefore really important that you take this into account when designing or critiquing epidemiological research. Of course, there can be other sources of bias as well.</p>
</section>
<section id="information-bias" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="information-bias"><span class="header-section-number">2.2</span> Information bias</h3>
<p>Much like selection bias, information bias has many different names and subcategories, but includes misclassification of the exposure or the disease status or both. Let’s consider an example of a case-control study which aims to look at a potential association between smoking and lung cancer. Regarding exposure, we would obviously need to assess whether participants were smokers or not and how much they smoked. We would also need to classify people as having lung cancer or not, as this is the outcome of interest. Both exposure and outcome could be misclassified. For instance, some heavy smokers may be erroneously classified as light smokers or some lung cancer patients may not receive the correct diagnosis. Usually this happens either because the study variables are not properly defined or due to flaws in data collection.</p>
<p>Let’s examine some of these flaws more closely. One common flaw in data collection occurs when interviewers ask individuals about their exposure status. In our example, interviewers would ask individuals with and without lung cancer, if they have been smoking. But the interviewers might be more thorough in assessing past smoking when interviewing people who have been diagnosed with lung cancer, exactly because they expect that lung cancer patients are likely to have been smokers. This would lead to misclassification of exposure status and eventually to a biased odds ratio. This type of information bias is called <em>Interviewer bias</em>. Luckily, this can be prevented if the interviewer does not know the disease status of the individual or if the collection process has been carefully standardised, so that interviewers follow a strictly defined protocol when they collect data from participants. However, interviewers are not the only potential source of information bias.</p>
<p>When patients with lung cancer are asked to report whether they have smoked in the past, they might be more likely to recall a brief period of smoking along time ago compared to those who don’t have lung cancer. This is not unexpected. Our memory is not perfect and we often forget things that have happened in the past. But when we get sick, we try hard to remember any details that could be linked to our disease. Details that we would otherwise erase from our memory. This phenomenon is called <em>Recall bias</em> and is a common type of information bias. We can prevent it by using objective ways to assess exposure such as medical records or biomarkers. We should highlight that <strong>Recall bias specifically refers to the differentially inaccurate recall of past exposure between cases and controls</strong>.</p>
<p>When all the participants have trouble remembering their exposure status, but this has nothing to do with their disease, there’s no recall bias. This is a principle that can be generalised, when exposure status is misclassified but equally so among cases and controls, we speak of <em>non-differential misclassification</em>. The same term applies when there are errors in determining the outcome, but they occur equally among exposed and non-exposed individuals. When non-differential misclassification occurs, the odds ratio we obtain is biased always towards the null. In contrast, <em>misclassification is differential</em> when errors in determining an individual’s exposure status occur unevenly among cases and controls or when there are errors in the diagnosis of the disease which occur unevenly among the exposed and non-exposed individuals.</p>
<p>Differential misclassification also leads to a biased estimate, but we cannot predict if it is biased towards or away from the null. As we can see, on all these occasions, there is information bias that could lead to a biased estimate. We have seen how these can influence the results of your study and with ways to prevent this. Together with confounding, which we will explain later, the broad categories of selection and information bias can explain essentially all the issues that could undermine the validity of a study.</p>
</section>
</section>
<section id="association-and-confounding" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="association-and-confounding"><span class="header-section-number">3</span> Association and Confounding</h2>
<section id="what-is-confounding" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="what-is-confounding"><span class="header-section-number">3.1</span> What is Confounding ?</h3>
<p>Correlation does not imply causation, one of the reasons we say this is confounding. Consider you are studying Down syndrome, and you come across a graph, which clearly shows that there is an association between birth order and Down syndrome. It seems there’s a higher risk of being born with Down syndrome among children with higher birth order. Now the question is, is it the birth order that increases this risk? You suspect that there maybe another variable correlated with birth order, which is responsible for the observed association.</p>
<p>Then, you find another graph, which shows that the risk of Down syndrome increases with maternal age. There’s no doubt that maternal age is also associated with birth order. Mothers will give birth to their fourth or fifth child are on average older than those who have their first baby. When you look at the risk of down syndrome within each age group, birth order doesn’t seem to matter at all. In summary, maternal age is entirely responsible for the association between two other variables, birth order and Down syndrome. <strong>This effect of an extraneous variable that wholly or partially accounts for the apparent effect of the study exposure or that masks in the underlying true association is called confounding</strong>. If you hadn’t looked further, you might have thought that birth order might cause Down syndrome, which is clearly not true. Confounding can be a real headache for researchers, and if not properly controlled for, it can produce misleading results.</p>
</section>
<section id="how-to-detect-confounding" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="how-to-detect-confounding"><span class="header-section-number">3.2</span> How to detect Confounding</h3>
<p>Confounding can lead to biased estimates and produce misleading results. Therefore, it is something that we should know about when designing, conducting, or critiquing a study. But how can we know if this confounding? There’s no statistical test for confounding, that are of course statistical methods that can help us make an informed decision. But it depends largely on our judgement. We will look at four commonly used ways to identify potential confounding factors in an epidemiological study.</p>
<p>Let’s consider an example of a study which aims to investigate the association between dog ownership and mortality among the elderly. Some previous studies have found that owning a dog can be associated with higher life expectancy. One straightforward way to identify factors that could confound this association, is to explore the literature. Knowledge of the subject matter can heavily influence our decisions regarding confounding. For example, if other studies have shown evidence that the size of the city where people reside is a confounder in the association between dog ownership and mortality, we have every reason to consider it as a confounder in our study. Knowledge of plausible biological pathways can similarly help us identify confounders.</p>
<p>However, this is not always possible, especially when we explore novel associations for which prior research is scarce. In such cases, we can examine whether the variable of interest satisfies the following three conditions. It is associated with the exposure in the source population, it is associated with the outcome in the absence of the exposure, and it is not a consequence of the exposure. In other words, it is not in the causal path between the exposure and the outcome. If we stick to the same example of dog ownership, our exposure, and mortality, our outcome, and we would like to explore whether age may be a confounder, we would need to answer the following questions. Is age associated with dog ownership among the elderly? Is age associated with mortality among those who do not own a dog? Is aging in the causal path between dog ownership and mortality? We can only respond to the first two questions when we analyze data from the study. But let’s assume that age is associated with both the exposure and the outcome. The answer to the last question is obvious here, owning a dog cannot change your age. So, age is not in the causal path. Age satisfies all three conditions. Therefore, we identify it as a confounder in this study.</p>
<p>A different way to think about this is to stratify data by the variable of interest, which is age in our example, and compare the stratum specific estimates with the estimate that we get when we analyze the entire set of data from the study. In our study, we will need to split our sample by age, below 80 and 80 and above for example, and calculate the odds ratio in each subgroup. We might find that owning a dog reduces mortality by 40 percent among those below 80 years old and 38 percent among those at least 80 years old. But when we analyze the entire sample together, we could find that owning a dog only reduces mortality by five percent, which, of course, doesn’t make sense when you consider the stratum specific numbers. When the pooled estimate is considerably different from what you would expect based on stratum specific estimates, it is very reasonable to think that there is confounding.</p>
<p>Lastly, the fourth way to detect confounding is the following. Let’s say we use a simple logistic regression model to estimate the crude odds ratio that expresses the strength of the association between dog ownership and mortality in our study. When we include age in the regression model, we estimate the adjusted odds ratio, adjusted for age in this case. If the adjusted odds ratio differs from the crude odds ratio by 15 percent or more, this may indicate confounding by age. This number is arbitrary and may not always reflect true confounding. It could be that we introduce confounding by adjusting for an additional variable. This is not the optimal method to identify confounding but can sometimes flag occasions where further investigation is required.</p>
<p>People often assume that they need to use all these methods, however you only need one of the above methods to identify confounding. If you can make a decision based on your knowledge of the subject matter, you don’t need to stratify or explore whether the three conditions are satisfied. In conclusion, there are multiple ways to think about confounding. But at least to some extent, we need to use our judgement to decide which factors may cause confounding. This is a critical decision because it will inform the design and data analysis of our study.</p>
<p>In summary we can detect confounding in the following ways:</p>
<ul>
<li>Subject matter knowledge. Factors identified in existing literature or plausible biological pathways can inform your decisions.</li>
<li>Three criteria for confounding. You need to examine if the suspected extraneous variable satisfies three conditions. – It is associated with the study exposure in the control group (source population) – It is associated with the study outcome in the absence of study exposure – It is not a consequence of exposure, i.e.&nbsp;it is not in the causal path between the exposure and the disease.</li>
<li>Stratification. Stratify data by the extraneous variable to examine if the estimates within strata of the extraneous variable are similar in magnitude and appreciably different from the crude (pooled) estimate.</li>
<li>Statistical adjustment. Controlling for the extraneous variable, e.g.&nbsp;by logistic regression, appreciably (&gt;15%) alters the estimate of the association between the exposure and the outcome.</li>
</ul>
</section>
</section>
<section id="dealing-with-confounding" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="dealing-with-confounding"><span class="header-section-number">4</span> Dealing with Confounding</h2>
<p>Confounding can be addressed either at the design stage, before data is collected, or at the analysis stage. We will also briefly look at Directed Acyclic Graphs, which is a novel way to detect bias and confounding and control for them.</p>
<section id="design-stage" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="design-stage"><span class="header-section-number">4.1</span> Design stage</h3>
<p>Confounding can lead to biased estimates which essentially defeats the purpose of research. What is the use of a study if we cannot trust its results? To overcome this problem, we always try to control for confounding. We will look at three methods which you can use to control for confounding at the design stage of a study: randomisation, restriction, and matching.</p>
<p>The first and admittedly the best available method to control for confounding is <strong>randomisation</strong>. When we split our sample into exposed and non-exposed at random, we ensure that the distribution of all factors and characteristics that may influence the outcome is similar between the two groups. With a large enough sample, this neutralizes the impact of any potential confounding factors. The beauty of randomisation is that it controls, not only for known confounders, but also for those that we are not even aware of. Unfortunately, randomisation only applies to trials. For example, we cannot randomise exposure such as smoking or air pollution due to ethical and practical reasons. Therefore, there are certain questions that cannot be answered by conducting a randomised trial. In such cases, we must rely on other methods to control for confounding.</p>
<p><strong>Restriction</strong> is such a method. The idea behind restriction is very simple. We restrict the eligibility criteria for subjects to be included in the sample so that we only study subjects within one category of the confounding variable. For instance, if we think that sex may be a confounder, we can decide to restrict our study to women. This solves the problem of confounding in a simple, efficient, and inexpensive way. On the other hand, it might make recruitment of participants more difficult, and in any case, it undermines the generalizability of the study. Finding that the drug is effective among women does not necessarily mean that it would be equally effective among men.</p>
<p>The third method to control for confounding, which is quite popular for case-control studies, is <strong>matching</strong>. In matching, we pair one or more controls to each case based on their similarity with regard to selected variables which will consider potential confounders. For instance, we suspect that sex and age maybe confounders in our study. We’ll recruit a case who is a woman aged 54 years. If we conduct a match case-control study, we need to find one or more controls that are 50-year old women. This can increase statistical power in our study, but it requires analytical methods that consider the match design. Also, there’s a limit to the number of confounders that we can control for with matching. If we try to match on too many variables, recruitment of controls becomes impractical. We’re also unable to study the variable we use for matching. Importantly, matching cannot be undone, and matching on a variable that is not a confounder actually harms statistical efficiency. So, a decision to match should be well thought out.</p>
<p>It is not always possible to anticipate and control for confounding at the design stage. Luckily, there are additional methods that can be applied during data analysis.</p>
</section>
<section id="analysis-stage" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="analysis-stage"><span class="header-section-number">4.2</span> Analysis stage</h3>
<p>Ideally, when designing a study, you would like to know all the potential confounding factors and plan how to control for them in advance, but some other confounding factors may only be identified as such when data is analyzed. We will look at the two main strategies to control for confounding at the data analysis stage: Stratification and Multi-variable regression models.</p>
<p>So, let’s say we have conducted a study where the exposure is smoking, and the outcome is chronic lung disease. We suspect that age is a confounder in this association. What can we do at the Data Analysis stage? One option would be <strong>stratification</strong>. The first step is to stratify our data by age group, and obtain an estimate for the association between smoking and chronic lung disease in each stratum. This means that we calculate an odds ratio, for example, for people 20-29 years old, and now the odds ratio for those 30-39 years old, and so on. In the second step of the process, we calculate a weighted average of the stratum-specific odds ratios. This weighted estimate is called Mantel-Haenszel adjusted odds ratio, and this is essentially the results of our study after controlling for confounding by age. This method allows us to get a sense of what is happening within the different strata, but it becomes really burdensome if you try to control for multiple confounders, and it doesn’t really work for confounding variables which are continuous.</p>
<p>A second option, which is what the majority of researchers do nowadays, is statistical adjustment using <strong>regression models</strong>. In our example, we can estimate the association between smoking and chronic lung disease by fitting a logistic regression model, where the exposure is the independent variable, and the outcome is the dependent variable. If smoking is the only independent variable we include in the model, we will calculate an unadjusted odds ratio. If we wish to control for confounding by age, we simply need to add it as an additional independent variable in the regression model, and we can easily calculate an odds ratio that is adjusted for age. The great advantage of multivariable regression is that <em>we can control for multiple confounding factors at the same time</em>, although including too many variables can sometimes cause problems.</p>
</section>
<section id="directed-acyclic-graphs-dags" class="level3" data-number="4.3">
<h3 data-number="4.3" class="anchored" data-anchor-id="directed-acyclic-graphs-dags"><span class="header-section-number">4.3</span> Directed Acyclic Graphs (DAGs)</h3>
<p>There are many other strategies that epidemiologists employ to control for confounding, some more popular than others which include directed acyclic graphs, or simply DAGs, which have become quite popular among researchers in recent years. The directed acyclic graphs, are, as you would expect, graphs. They are essentially a way to present, in a graph, causal associations between variables. If we consider the association between high blood pressure and stroke, High blood pressure is the exposure and stroke is the outcome.</p>
<p>If we think that high blood pressure causes stroke, we will draw an arrow from high blood pressure to stroke. This is a simple way to illustrate what we are talking about. But things are rarely that simple. Let’s introduce one additional factor, age. Old age may affect blood pressure, but it can also affect the probability of having a stroke. To illustrate this, we would add two more arrows in the graph, one going from age to blood pressure and the other also starting from age and going to stroke. And here it is, this is a DAG. Depending on the context of the study, we could add more variables and arrows. Although it becomes quite complicated when you have multiple factors and complex relationships among them.</p>
<p>Using DAGs can help us think about the variables that are relevant to our study and the associations between them. It is also a great tool to communicate this information to others. There’s more to it. Epidemiologists have developed a set of rules called <strong>D-separation rules</strong> which allow them to identify confounding and other types of bias just by looking at the DAG. One of the benefits of using DAGs is that it is very practical. Applying the D-separation rules, you can identify the minimum set of variables that you need to control for in order to address any sources of bias in your study without having to name or characterize the type of bias that you observed. This is why the focus in DAGs is on <em>confounding and not on confounders</em>.</p>
</section>
</section>
<section id="effect-modification" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="effect-modification"><span class="header-section-number">5</span> Effect modification</h2>
<p>When we analyze data from an epidemiological study, we usually build a statistical model with the aim to describe what has happened in our study. To do so, we make assumptions and often, intentionally ignore differences between individuals or subgroups, so that we can estimate an average association between the exposure and the outcome that applies to the entire population. But sometimes, after controlling for confounding and bias, there is still a third variable, the impact of which on the association between exposure and outcome is so important that cannot and should not be ignored. This is called <strong>effect modification</strong>.</p>
<p>Imagine you are conducting a randomised clinical trial which aims to test the effectiveness of a new antibiotic against pneumonia. Some of the patients received this new antibiotic, and the rest are given the older drug that is widely used. You follow all the patients up and there are two potential outcomes, a patient can either recover or die. When you analyze data from the entire sample, you find that the odds ratio of recovery of those exposed to the new drug compared to those exposed to the old drug is 1.5, which means those taking the new antibiotic are 50 percent more likely to recover compared to the controls. This is an important result for the trial and if you have conducted your RCT properly, you don’t need to worry about confounding. But before you publish your results, one of your colleagues decides to stratify the data by sex, and notices that the odds ratio is 1.1 for men and 1.9 for women. Men and women do not differ in terms of age, comorbidities, or other confounding factors. After careful consideration, your team decides that the bias cannot explain this difference. So, what’s happening?</p>
<p>Well, sometimes a drug can be more effective in women compared to men, or vice versa. In other words, sex modifies the association between the drug, your exposure, and recovery, your outcome. This is a phenomenon that we call effect modification. Making the definition more general, <em>we say that effect modification exists when the strength of the association varies over different levels of a third variable</em>. In such cases, reporting the overall estimate would not be helpful at all because it would not reflect what actually happened in either sex.</p>
<p>Should you then find a way to control for effect modification and avoid this problem? Definitely not. Unlike confounding, effect modification is a naturally occurring phenomenon. It’s not a problem of your study. You should have no intention to control for it, but the way you report your results should take it into account. In the case of the trial with the new antibiotic, you simply need to present results stratified by sex. You might need one more table in your paper, but this will allow you to accurately report your findings for both men and women. In general, when effect modification is detected, you must conduct stratified analysis. In the example above, we ignored uncertainty. You probably noticed that we gave the estimates without their confidence intervals.</p>
<p>In real life uncertainty cannot be ignored, and this raises one key question, how can we be certain that the stratum-specific estimates are truly different between them? There are statistical methods that can help us identify effect modification such as the Breslow-Day test, the Q test, and including interaction terms in regression models. Regression models are very frequently used, and the term interaction is often considered equivalent to effect modification. The term synergism means that the effect modifier potentiates the effect of the exposure, and antagonism means that the effect modifier diminishes the effect of the exposure. Effect modification is an important concept in epidemiology because it is relevant to many associations in nature but also one that confuses a lot of people. Perhaps it’s because we’re so used to trying to eliminate bias and confounding, that we find it hard to accept that this is a natural phenomenon that we simply need to describe.</p>
</section>
<section id="confounding-vs-effect-modifcation" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="confounding-vs-effect-modifcation"><span class="header-section-number">6</span> Confounding vs Effect modifcation</h2>
<p>We have discussed how to identify confounding, and separately, how to identify effect modification. But things seem to get a bit confusing when you have to assess both confounding and effect modification in the same study. In reality, there’s absolutely no reason to get confused. In a typical study, we have an exposure and an outcome. Let’s also consider a third extraneous variable. I call it extraneous because it is neither the exposure nor the outcome. It could be something like sex or race, for example. You would like to explore whether the extraneous variable is a source of confounding or effect modification or maybe both.</p>
<p>The first thing to do would be to stratify the data by the extraneous variable, and estimate the association between the exposure and the outcome in each stratum. In practical terms, this means that you obtain an odds ratio for men and one for women, if sex is the extraneous variable of interest, of course. If the odds ratio for men is similar to the odds ratio for women, then based on the definition, there’s obviously no effect modification by sex, while the question whether there is confounding by sex is still open. Using the stratum-specific odds ratios, you can estimate an adjusted odds ratio, adjusted for sex. If the adjusted odds ratio is similar to the crude or unadjusted odds ratio, there is probably no confounding by sex, and you don’t need to take any further action.</p>
<p>But if the adjusted odds ratio differs considerably from the unadjusted estimate, this may be an indication of confounding, and you should control for it by presenting the adjusted estimate. What happens if the stratum-specific estimates are different? In our example, what should you do if the odds ratio for men is statistically different from the odds ratio for women? The answer is straightforward. This is a textbook case of effect modification. Therefore, you will just report the stratum-specific odds ratios separately. Again, the question whether sex is also a confounder has not been answered at this stage. However, if you’re presenting separate estimates for men and women, which you do, because there is effect modification, you don’t really care if sex can cause confounding. In practice, you have already controlled for confounding by presenting stratum-specific odds ratios. This strategy should allow you to identify confounding and effect modification in a study. If you think about it, you already know a few methods to assess confounding and you described one of them, while also repeating the method to identify effect modification. In some cases, you might find that a certain variable is both a confounder and an effect modifier, which is possible. In summary, <em>confounding is a problem of our study, and therefore, we try to control for it. Whereas, effect modification is a natural phenomenon, which requires the presentation of stratum-specific estimates</em>.</p>
</section>
<section id="causation" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="causation"><span class="header-section-number">7</span> Causation</h2>
<p>The distinction between association and causation is fundamental in epidemiology. Whenever you observe an association between an exposure and an outcome, you have to go through a few alternative explanations before you even start thinking about causality. The first possible explanation is chance which is surprisingly often ignored. There is an entire field of science, statistics, which deals with the uncertainty surrounding research findings. You should always consider the level of uncertainty and how chance may have affected your results.</p>
<p>Let’s assume that you have done all the appropriate statistical tests and you are confident that it is unlikely chance was responsible for your findings. The next step is to think about potential sources of bias and confounding. You’re familiar with the main types of bias and with methods to identify and control for confounding. These must be applied rigorously to exclude any external influences or systematic errors that might have affected your study. Once you’ve concluded that there was no bias or confounding, would you be ready to declare that the association you have detected is causal?</p>
<p>Not exactly. Unless you’re a real pioneer in science, your study is probably not the only one that has investigated this research question. Looking at the bigger picture allows you to make an informed judgement within the context of current scientific knowledge. British epidemiologist, <strong>Sir Austin Bradford-Hill, came up with nine criteria that can be helpful in this process</strong>. It’s been more than 50 years since he published the list, but I think that there’s still value in considering them. The first thing to consider is the strength of the association. A small effect size doesn’t mean that it’s not causal, but if the association is strong, causality may be more likely. The second criteria in the list is consistency. Consistent findings observed by different people in different settings with different samples can also be an indication of causality.</p>
<p>Causation is also likely in the case of a very specific population at a specific site and disease with no other likely explanation. The more specific and association between a factor and an effect is, the bigger the probability of a causal relationship. Another consideration is temporality. This is an obvious one, the effect has to occur after the cause. It is also helpful if you find that there is a biological gradient in the association. Greater exposure often leads to greater incidence of the disease. Although this is not always the case. Additionally, you can draw evidence from other fields of research. If there is coherence between your epidemiological results and findings from laboratory research and if there is plausible biological explanation of the association, causality becomes more likely. The same is true when you have experimental evidence available and when you consider the effects of similar factors. The Bradford Hill criteria is not a checklist that you need to follow, but they highlight the challenges you might face when thinking about causal inference. Of course, these become relevant only after you have work hard to eliminate factors such as chance, bias and confounding.</p>


</section>

<link href="//cdn-images.mailchimp.com/embedcode/classic-071822.css" rel="stylesheet" type="text/css"><div id="mc_embed_signup">
    <form action="https://livingdatalab.us8.list-manage.com/subscribe/post?u=e2d57b0d6e43b4f6bff927a55&amp;id=a30bdff125&amp;f_id=009d05e0f0" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
        <div id="mc_embed_signup_scroll">
        <h2 class="anchored">Subscribe</h2>
<div class="mc-field-group">
    <label for="mce-EMAIL">Email Address
</label>
    <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" required="">
    <span id="mce-EMAIL-HELPERTEXT" class="helper_text"></span>
</div>
    <div id="mce-responses" class="clear foot">
        <div class="response" id="mce-error-response" style="display:none"></div>
        <div class="response" id="mce-success-response" style="display:none"></div>
    </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_e2d57b0d6e43b4f6bff927a55_a30bdff125" tabindex="-1" value=""></div>
        <div class="optionalParent">
            <div class="clear foot">
                <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
            </div>
        </div>
    </div>
</form>
</div><script type="text/javascript">(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';fnames[3]='ADDRESS';ftypes[3]='address';fnames[4]='PHONE';ftypes[4]='phone';fnames[5]='BIRTHDAY';ftypes[5]='birthday';}(jQuery));var $mcj = jQuery.noConflict(true);</script></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp(/http:\/\/livingdatalab\.com/);
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
    var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">LivingDataLab Data Science Blog</div>
  </div>
</footer>



</body></html>